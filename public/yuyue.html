<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="css/common.css" />
		<link rel="stylesheet" type="text/css" href="css/mymedia.css"/>
		<link rel="stylesheet" href="css/yuyue.css" />
		
	</head>
	<body>
		<!--头部-->
		<div class="banners">
			<table></table>
			<div class="banner_box" id="main">
			<div class="banner" id="banner">
			</div>
			</div>
			<!--固定导航-->
			<nav>
				<div class="nav">
				<div class="dh_left">
					<img src="img/logo_r35j.png" />
					<div class="title">
						<b id="dh_left_b">某某旅行社</b><br />
						<span id="dh_left_s">Travel Agency</span>
					</div>	
				</div>
				<div class="dh_right">
					<ul class="u">
						<li class="dropdown right">
							
								<a href="index.html" data-trigger="dropdown">首页</a>
							
							<!--下拉菜单-->
						<ul class="dropdown-menu">
					<li><a href="index.html#s_dh">精选路线</a></li>
					<li><a href="index.html#s_cl">热门景点</a></li>
					<li><a href="index.html#new">新闻动态</a></li>
						</ul>	
						</li>
						<li class="right">
							<a href="about_our.html">关于我们</a>
						</li>
						<li class="dropdown right">
							<a href="router.html" data-trigger="dropdown">精选路线</a>
							<!--下拉菜单-->
						<ul class="dropdown-menu">
					<li><a href="router.html#content1">推荐路线</a></li>
					<li><a href="router.html#content2">较热线路</a></li>
					<li><a href="router.html#content3">国内线路</a></li>
					<li><a href="router.html#content4">国外线路</a></li>
					<li><a href="router.html#content5">自由行</a></li>
						</ul>
						</li>
						<li class="right">
							<a href="yuyue.html">旅行预约</a>
						</li>
						<li class="dropdown right">
							<a href="news.html" data-trigger="dropdown">新闻中心</a>
							<!--下拉菜单-->
						<ul class="dropdown-menu">
					<li><a href="news.html#content1">公司新闻</a></li>
					<li><a href="news.html#content2">媒体报道</a></li>
					<li><a href="news.html#content3">行业动态</a></li>
						</ul>
						</li>
						<li class="right">
							<a href="contact_us.html">联系我们</a>
						</li>
					</ul>
				</div>
				</div>
			</nav>
		</div>
		<!--客服-->
			<div class="kefu">
				<div id="waiter">
						<ul>
							<li><img src="img/cherry.png"/><a href="javascript:;">客服1</a></li>
							<li><img src="img/cherry.png"/><a href="javascript:;">客服2</a></li>
						</ul>	
					</div>
				<div id="kefu">客服
				</div>
			</div>
			<!--返回顶层-->
			<div id="top1" title="返回顶层"><a href="#">↑</a></div>
	<form>
		<table class="yuyue_tab">
			<!--表头-->
			<thead>
				<tr>
					<td colspan="5">在线预约</td>
				</tr>
				<tr>
				<td colspan="5">定制您的专属旅行路线，我们会为您全程服务</td>
				</tr>
			</thead>
			<!--提交预约表单,姓名输入-->
			<tbody>
			<tr>
				<td>
					<div class="yuyue_tab_cir">
						01
					</div>
				</td>
				<td>
					<div>
					<h4>提交预约表单</h4>
					<p>填写好相关预约信息​，点击提交</p>
					</div>
				</td>
				<td>
					<span class="span_1">姓名</span>
					<span class="span_2">*</span>
				</td>
				<td>
						<input type="text" placeholder="请输入您的真实姓名" name="yname"/>
					</td>
				<td>
					<div class="vali_info">
						10个字符以内的纯汉字或纯英文
					</div>
				</td>
			</tr>
			<!--初步旅行路线,手机号码填写-->
			<tr>
				<td>
					<div class="yuyue_tab_cir">
						02
					</div>
				</td>
				<td>
					<div>
					<h4>初步旅行路线</h4>
					<p>根据提交的预约信息对旅行线路进行规划和报价</p>
					</div>
				</td>
				<td>
					<span class="span_1">手机号</span>
					<span class="span_2">*</span>
				</td>
				<td>
						<input type="text" placeholder="请输入您的手机号码" name="phone"/>
					</td>
				<td>
					<div class="vali_info">
						输入合法的手机号
					</div>
				</td>
			</tr>
			<!--支付部分定金,出行时间-->
			<tr>
				<td>
					<div class="yuyue_tab_cir">
						03
					</div>
				</td>
				<td>
					<div>
					<h4>支付部分定金</h4>
					<p>确定初步方案和报价后，支付部分定金</p>
					</div>
				</td>
				<td>
					<span class="span_1">出行日期</span>
					<span class="span_2">*</span>
				</td>
				<td>
						<input type="text" placeholder="请输入您的出行日期" name="time"/>
					</td>
				<td>
					<div class="vali_info">
						以出发当天为出行日期,例如:20010101
					</div>
				</td>
			</tr>
			<!--确定详细方案,旅游地点-->
			<tr>
				<td>
					<div class="yuyue_tab_cir">
						04
					</div>
				</td>
				<td>
					<div>
					<h4>确定详细方案</h4>
					<p>对方案进行详细规划和沟通</p>
					</div>
				</td>
				<td>
					<span class="span_1">旅游地点</span>
					<span class="span_2">*</span>
				</td>
				<td>
						<input type="text" placeholder="请输入您想去的景点名称" name="tourist_location"/>
					</td>
				<td>
					<div class="vali_info">
						以本网站推荐的景点为主
					</div>
				</td>
			</tr>
			<!--交付尾款出发,出行人数-->
			<tr>
				<td>
					<div class="yuyue_tab_cir">
						05
					</div>
				</td>
				<td>
					<div>
					<h4>交付尾款出发</h4>
					<p>交付尾款后，出发旅游，保持沟通</p>
					</div>
				</td>
				<td>
					<span class="span_1">出行人数</span>
					<span class="span_2">*</span>
				</td>
				
				<td>
						<input type="text" placeholder="请输入出行的人数" name="num"/>
					</td>
				<td>
					<div class="vali_info">请填入适量的数字人数</div>
				</td>
			</tr>
			<!--留言备注-->
			<tr>
				<td></td>
				<td></td>
				<td>
					<span class="span_1">留言备注</span>
					<span class="span_2">*</span>
				</td>
				<td>
					<textarea  id="liuyan" name="remark" placeholder="您有什么要补充的嘛？"/></textarea>
					</td>
			</tr>
			<tr>
				<td></td>
				<td></td>
				<td colspan="2">
					<div id="div_2">
						<a href="javascript:loca()" id="tijiao">提交</a>
					
					</div>
				</td>
			</tr>
			</tbody>
		</table>
		</form>
		<!--弹出框-->
		<div class="alert fade" id="sucess" style="border: 1px solid # #000000;">
		<p class="close">×</p>
		<p>提交成功,我们的工作人员会按照您的要求合理安排,祝您旅行愉快!</p>
	</div>	
		<!--尾部-->
			<footer>
		<div id="foot">
	<div id="foot_dh" class="foot_font">
					<ul >
						<li ><b>首页</b></li>
						<li>关于我们</li>
						<li>精选路线</li>
						<li>旅行预约</li>
						<li>新闻中心</li>
						<li>联系我们</li>
					</ul>
			</div>
			<hr /><br />
			<p class="foot_font" id="foot_z1">联系地址： 广东省xxxxxxxxxxxxxxx       客服热线：400-000-0000      联系邮箱：XXXXXX@qq.com</p>
			<p class="foot_font" id="foot_z2">版权所有 2015 xxxx旅行社有限公司 ALL RIGHTS RESERVED ICP备xxxxxxx</p>
		</div>
		</footer>
		<script src="js/jquery-3.2.1.js"></script>
		<script src="js/common.js"></script>
		<script src="js/about_our.js"></script>
		<script type="text/javascript">
			function loca(){
				//获取按钮,绑定事件,在提交时保证所有框都赋值
			var btn=document.getElementById('tijiao');
			//如果未通过,则
				if(vail(yname,/^[\u4E00-\u9FA5]{2,10}|[a-zA-Z]{2,10}$/)==false){
					yname.focus();
				}else if(vail(phone,/^((\+86|0086)\s+)?1[3-8]\d{9}$/)==false){
					phone.focus();
				}else if(vail(time,/^[0-9]{8}$/)==false){
					time.focus();
				}else if(vail(num,/^[0-9]{1,3}$/)==false){
					num.focus();
				}else{
					var xhr=new XMLHttpRequest();
				console.log(xhr);
				xhr.onreadystatechange=function(){
					console.log(1111111111111);
					console.log(xhr.readyState);
					console.log(xhr.status);
					if(xhr.readyState==4&&xhr.status==200){
						var result=xhr.responseText;
						console.log(result);
var close=document.getElementsByClassName("close")[0];	
var alert=document.getElementById("sucess");
console.log(alert)
console.log(close)
			 alert.className="alert fade in"
			close.onclick=function(){
				alert.className="alert fade"
				location.reload();
			}
						
					}
				}
				xhr.open('post','http://127.0.0.1:3000/yuyue/kehu',true);
				var formdata="yname="+yname.value+"&phone="+phone.value+"&time="+time.value+"&tourist_location="+tourist_location.value+"&num="+num.value+"&remark="+remark.value;
				xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
				xhr.send(formdata); 
				}
			
				
			}
			var tijiao=document.getElementById('tijiao');
			var form=document.forms[0];
			var yname=form.yname;
			var phone=form.phone;
			var time=form.time;
			var tourist_location=form.tourist_location;
			var num=form.num;
			var remark=document.getElementById("liuyan");
			//点击选框命中特效
			yname.onfocus=phone.onfocus=time.onfocus=tourist_location.onfocus=num.onfocus=remark.onfocus=getFocus;
			function getFocus(){
				this.className="txt_focus";
				var div=this.parentNode.nextElementSibling.firstElementChild;
				div.className="";
			}
			remark.onfocus=function(){
				this.className="txt_focus";
			}
			remark.onblur=function(){
				this.className="";
			}
			//检测每个框是否输入格式有错误
			function vail(txt,reg){
				txt.className="";
				var div=txt.parentNode.nextElementSibling.firstElementChild;
				if(reg.test(txt.value)){
					div.className="vali_success";
					return true;
				}else{
					div.className="vali_fail";
					return false;
				}
			}
			yname.onblur=function(){
				vail(this,/^[\u4E00-\u9FA5]{2,10}|[a-zA-Z]{2,10}$/);
			}
			phone.onblur=function(){
				vail(this,/^((\+86|0086)\s+)?1[3-8]\d{9}$/);
			}
			time.onblur=function(){
				vail(this,/^[0-9]{8}$/);
			}
			num.onblur=function(){
				vail(this,/^[0-9]{1,3}$/);
			}
			tourist_location.onblur=function(){
				vail(this,/^[\u4E00-\u9FA5]{2,15}$/)
			}
		</script>
	</body>
</html>
